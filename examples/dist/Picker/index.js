Component({options:{addGlobalClass:!0,multipleSlots:!0},externalClasses:["custom-class","active-class","toolbar-class","column-class"],properties:{columns:{type:Array,value:[]},itemHeight:{type:Number,value:44},valueKey:{type:String,value:"text"},showToolbar:Boolean,title:String,confirmButtonText:{type:String,value:"确认"},cancelButtonText:{type:String,value:"取消"},toolbarPosition:{type:String,value:"top",options:["top","bottom"]},visibleItemCount:{type:Number,value:6,observer:"updateTopVisible"},defaultIndex:{type:Number,value:0},loading:Boolean},data:{topVisible:2},methods:{isSimple(){const{columns:e}=this.properties;return e.length&&!e[0].values},updateTopVisible(){const{visibleItemCount:e}=this.properties,t=parseInt(e/2)-1;this.setData({topVisible:t})},onChange(e){wx.nextTick(()=>{this.isSimple()?this.triggerEvent("change",{picker:this,value:this.getColumnValue(0),index:this.getColumnIndex(0)}):this.triggerEvent("change",{picker:this,value:this.getValues(),index:e.currentTarget.dataset.index})})},onCancel(){this.emitByType("cancel")},onConfirm(){this.emitByType("confirm")},emitByType(e){this.isSimple()?this.triggerEvent(e,{value:this.getColumnValue(0),index:this.getColumnIndex(0)}):this.triggerEvent(e,{value:this.getValues(),index:this.getIndexes()})},getColumnValue(e){const t=this.getColumn(e);return t&&t.getValue()},getColumnIndex(e){const t=this.getColumn(e);return t?t.data.currentIndex:""},getColumn(e){const t=this.selectAllComponents(".lin-picker-column");return null==e||null==e?t:t[e]},getValues(){return this.getColumn().map(e=>e.getValue())},getIndexes(){return this.getColumn().map(e=>e.data.currentIndex)},setColumnValues(e,t){const n=this.getColumn(e);if(null==n)return Promise.reject(new Error("setColumnValues: 对应列不存在"));return JSON.stringify(n.data.optionsList)===JSON.stringify(t)?Promise.resolve():new Promise(e=>{n.setData({optionsList:t},()=>{n.setIndex(0),e()})})},setValues(e=[]){const t=e.map((e,t)=>this.setColumnValues(t,e));return Promise.all(t)},setColumnIndex(e,t){const n=this.getColumn(e);return null==n?Promise.reject(new Error("setColumnIndex: 对应列不存在")):(n.setIndex(t),Promise.resolve())},setIndexes(e=[]){const t=e.map((e,t)=>this.setColumnIndex(t,e));return Promise.all(t)},setColumnValue(e,t){const n=this.getColumn(e);return null==n?Promise.reject(new Error("setColumnValue: 对应列不存在")):(n.setValue(t),Promise.resolve())},getColumnValues(e){return(this.getColumn(e)||{}).data.optionsList}},created:function(){},attached:function(){},ready:function(){this.updateTopVisible()},moved:function(){},detached:function(){}});