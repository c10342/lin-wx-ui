function add(e,t){return Math.round((e+t)*10**10)/10**10}const timeSecond=500;Component({behaviors:["wx://form-field"],options:{addGlobalClass:!0},externalClasses:["custom-class","input-class","plus-class","minus-class"],properties:{name:String,value:{type:Number,value:null,observer(e){this.properties.asyncChange&&wx.hideLoading(),this.setData({inputValue:this.formatValue(e)})}},min:{type:Number,value:1},max:{type:Number,value:null},step:{type:Number,value:1},integer:Boolean,disabled:Boolean,decimalLength:{type:Number,value:null},inputWidth:{type:[String,Number],value:"64rpx"},buttonSize:{type:[String,Number],value:"56rpx"},buttonFontSize:{type:[String,Number],value:"40rpx"},inputFontSize:{type:[String,Number],value:"30rpx"},disableInput:Boolean,showPlus:{type:Boolean,value:!0},showMinus:{type:Boolean,value:!0},disablePlus:Boolean,disableMinus:Boolean,asyncChange:Boolean,longPress:{type:Boolean,value:!0}},observers:{"disabled,disableMinus,min,inputValue":function(e,t,i,s){e||t||null!=i&&s<=i?this.setData({isMinusDisable:!0}):this.setData({isMinusDisable:!1})},"disabled,disablePlus,max,inputValue":function(e,t,i,s){e||t||null!=i&&s>=i?this.setData({isPlusDisable:!0}):this.setData({isPlusDisable:!1})}},data:{inputValue:"",isMinusDisable:!1,isPlusDisable:!1},methods:{onTouchend(){this.timer&&(clearInterval(this.timer),this.timer=null)},onMinusLongpress(){!this.data.isMinusDisable&&this.properties.longPress&&(this.onTouchend(),this.timer=setInterval(()=>{this.onMinus()},500))},onPlusLongpress(){!this.data.isPlusDisable&&this.properties.longPress&&(this.onTouchend(),this.timer=setInterval(()=>{this.onPlus()},500))},onMinus(){const{step:e}=this.properties,{inputValue:t,isMinusDisable:i}=this.data;if(i)return void this.triggerEvent("overlimit",{type:"minus"});let s=add(1*t,-1*e);this.emitChange(s),this.triggerEvent("minus")},onPlus(){const{step:e}=this.properties,{inputValue:t,isPlusDisable:i}=this.data;if(i)return void this.triggerEvent("overlimit",{type:"plus"});let s=add(1*t,1*e);this.emitChange(s),this.triggerEvent("plus")},onBlur(e){let t=e.detail.value;this.emitChange(t),this.triggerEvent("blur")},onFocus(){this.triggerEvent("focus")},formatValue(e){e*=1;const{integer:t,max:i,min:s,decimalLength:n}=this.properties;return t&&(e=parseInt(e)),null!=i&&i<e&&(e=i),null!=s&&s>e&&(e=s),n&&(e=e.toFixed(n)),e},emitChange(e){if(e!=this.data.inputValue){const t=this.formatValue(e);this.properties.asyncChange?wx.showLoading():this.setData({inputValue:t}),this.triggerEvent("change",t)}}},created:function(){},attached:function(){},ready:function(){this.timer=null;const{value:e,min:t}=this.properties;let i=0;e?i=e:t&&(i=t),this.setData({inputValue:this.formatValue(i)})},moved:function(){},detached:function(){this.onTouchend()}});